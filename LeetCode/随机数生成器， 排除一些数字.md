#随机数生成器， 排除一些数字

##题意
从1-n之中随机生成一个数， 但是另外还有一个 list, 是不能被接受的答案。 要求每个数字被生成的概率相等。

##解题

###方法一
随便生成一个数， 然后看这个数在不在 list 之中， 如果在的话， 重复这个过程。

缺点： 有可能需要很久才能得到结果。

###方法二， 可以更改随机数范围
假设原范围是 n, 然后  list 长度为m， 那么就生成一个 1->(n-m) 的数， 这个数代表的是 合理范围内的数字 的Index， 在这一步能够保证是随机产生的。

但因为要跳过不合理的数字， 所以我们可以 数一下 ， 在 list 之中， 有多少个 数字比 这个 index 小， 如果发现一个， 那么 index 就++。

```
int random = start + rnd.nextInt(end - start + 1 - exclude.length);
for (int ex : exclude) {
        if (random < ex) {
            break;
        }
        random++;
    }
```

在这一步， 因为 random  是 update on the fly， 所以能够保证最后的答案一定不会和 list 中的某个数字重合。

###改进
如果采用二分法的话， 因为 random 不是随时都被 update的， 而只是 update 的一个初态和终态， 所以有可能在update 之后， （random 加上了某个数， 比如从5加到了8）, 发现 8 也是不合理的答案， 所以需要再次的 二分搜索， 直到最后生成 的 random 不在原来的list之中， 这个时候 二分法就结束。

##方法三，不能更改随机数范围
首先生成一个 1 到 n 中的数， 如果这个数 不在 List 之中， 直接返回。

如果这个数 random 在list之中， 我们想知道， 排除开 list 中的比这个数小的数之后， 我们应该选哪个数。 所以这个时候， 二分搜索， 找到在 List 中比这个数小的数的个数， 然后用 Random 减去这个个数。

如上个方法描述的一样， 有可能此时发现random  还是在list 之中， 我们需要再次二分， 继续递减， 直到random 不在list之中为止。